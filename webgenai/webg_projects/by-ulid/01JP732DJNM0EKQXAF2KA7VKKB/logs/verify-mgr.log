
API Logic Project Server Setup (01JP732DJNM0EKQXAF2KA7VKKB) Starting with CLI args: 
.. /opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/alp_verify_only.py

Created August 03, 2024 09:34:01 at /opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB


server_setup - get_args: Config args: 
.. flask_host: 0.0.0.0, port: 5656, 
.. swagger_host: localhost, swagger_port: 8282, 
.. client_uri: None, 
.. http_scheme: http, api_prefix: /api, 
.. | verbose: False, create_and_run: False
config - get_cli_args: Getting cli args, with hostname=37b02500f14d on local_ip=172.17.0.2
config - get_cli_args: WSGI - no args, using creation default host/port..  sys.argv = ['/opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/alp_verify_only.py']


server_setup - get_args: CLI args: 
.. flask_host: 0.0.0.0, port: 5656, 
.. swagger_host: localhost, swagger_port: 8282, 
.. client_uri: None, 
.. http_scheme: http, api_prefix: /api, 
.. | verbose: False, create_and_run: False

server_setup - get_args: ENV args: 
.. flask_host: 0.0.0.0, port: 4444, 
.. swagger_host: localhost, swagger_port: 8282, 
.. client_uri: None, 
.. http_scheme: http, api_prefix: /01JP732DJNM0EKQXAF2KA7VKKB, 
.. | verbose: False, create_and_run: False



server_setup - get_args: ENV args: 
.. flask_host: 0.0.0.0, port: 4444, 
.. swagger_host: localhost, swagger_port: 8282, 
.. client_uri: None, 
.. http_scheme: http, api_prefix: /01JP732DJNM0EKQXAF2KA7VKKB, 
.. | verbose: False, create_and_run: False



Config args: 
.. flask_host: 0.0.0.0, port: 4444, 
.. swagger_host: localhost, swagger_port: 8282, 
.. client_uri: None, 
.. http_scheme: http, api_prefix: /01JP732DJNM0EKQXAF2KA7VKKB, 
.. | verbose: False, create_and_run: False
config - get_cli_args: Getting cli args, with hostname=37b02500f14d on local_ip=172.17.0.2
config - get_cli_args: No arguments - using creation default host/port

CLI args: 
.. flask_host: 0.0.0.0, port: 4444, 
.. swagger_host: localhost, swagger_port: 8282, 
.. client_uri: None, 
.. http_scheme: http, api_prefix: /01JP732DJNM0EKQXAF2KA7VKKB, 
.. | verbose: False, create_and_run: False

ENV args: 
.. flask_host: 0.0.0.0, port: 4444, 
.. swagger_host: localhost, swagger_port: 8282, 
.. client_uri: None, 
.. http_scheme: http, api_prefix: /01JP732DJNM0EKQXAF2KA7VKKB, 
.. | verbose: False, create_and_run: False


sqlite_db_path validity check with db_uri: sqlite:////opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/database/db.sqlite
	.. Absolute: //opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/database/db.sqlite
	.. sqlite_db_path is a valid file

Data Model Loaded, customizing...
..discovered models: []
LogicBank Activation - declare_logic.py
Loading rules from /opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/logic/wg_rules
01JP733V268CKQNJPD728B8Y5H rule file: logic/wg_rules/Customer_Balance_Rule.py
01JP733V29MY8WSZVNH7XA1MJT rule file: logic/wg_rules/Customer_Balance_Sum_Rule.py
01JP733V2AA51Q598FT9NNAMDN rule file: logic/wg_rules/Order_Amount_Total_Sum_Rule.py
01JP733V2BMD1W3QZX4RZ92QX1 rule file: logic/wg_rules/Item_Amount_Formula_Rule.py
01JP733V2CZX51BKNT6FHPF0N8 rule file: logic/wg_rules/Item_Unit_Price_Copy_Rule.py
01JP732EZV7MB5EW8X45B6X8FE rule file: logic/wg_rules/Customer_Balance_Constraint.py
01JP732F0AF6ECED61ENW0PT21 rule file: logic/wg_rules/Order_Kafka_Integration.py
01JP732F0D701XE32B8SJNE0JR rule file: logic/wg_rules/Customer_Name_Constraint.py
01JP732F0GBQ2A9KWHVX5AGQNK rule file: logic/wg_rules/Customer_Name_Constraint.py

[34mVerifying rule: Customer_Balance_Sum_Rule - 01JP733V29MY8WSZVNH7XA1MJT[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.099856)
Mapped Class[Customer] rules:
  Derive <class 'database.models.Customer'>.balance as Sum(Order.amount_total Where Rule.sum(derive=Customer.balance, as_sum_of=Order.amount_total, where=lambda row: row.date_shipped is None) - <function init_rule.<locals>.<lambda> at 0xffff8b763600>)

The following attributes have been referenced

..Customer.balance: aggregate derivation
..Order.date_shipped: aggregate where clause
..Order.amount_total: sum derived from

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.099856)
Mapped Class[Customer] rules:
  Derive <class 'database.models.Customer'>.balance as Sum(Order.amount_total Where Rule.sum(derive=Customer.balance, as_sum_of=Order.amount_total, where=lambda row: row.date_shipped is None) - <function init_rule.<locals>.<lambda> at 0xffff8b763600>)
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP733V29MY8WSZVNH7XA1MJT[0m

[34mVerifying rule: Order_Amount_Total_Sum_Rule - 01JP733V2AA51Q598FT9NNAMDN[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.105635)
Mapped Class[Order] rules:
  Derive <class 'database.models.Order'>.amount_total as Sum(Item.amount Where  - None)

The following attributes have been referenced

..Order.amount_total: aggregate derivation
..Item.amount: sum derived from

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.105635)
Mapped Class[Order] rules:
  Derive <class 'database.models.Order'>.amount_total as Sum(Item.amount Where  - None)
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP733V2AA51Q598FT9NNAMDN[0m

[34mVerifying rule: Item_Amount_Formula_Rule - 01JP733V2BMD1W3QZX4RZ92QX1[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.110431)
Mapped Class[Item] rules:
  Derive <class 'database.models.Item'>.amount as Formula (-1): Rule.formula(derive=Item.amount, as_expression=la [...]

The following attributes have been referenced

..Item.quantity: - formula
..Item.unit_price: - formula

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.110431)
Mapped Class[Item] rules:
  Derive <class 'database.models.Item'>.amount as Formula (1): Rule.formula(derive=Item.amount, as_expression=la [...]
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP733V2BMD1W3QZX4RZ92QX1[0m

[34mVerifying rule: Item_Unit_Price_Copy_Rule - 01JP733V2CZX51BKNT6FHPF0N8[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.115503)
Mapped Class[Item] rules:
  Derive <class 'database.models.Item'>.unit_price as Copy(product.unit_price)

The following attributes have been referenced

..Item.unit_price: parent copy derivation
..Product.unit_price: parent copy from

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.115503)
Mapped Class[Item] rules:
  Derive <class 'database.models.Item'>.unit_price as Copy(product.unit_price)
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP733V2CZX51BKNT6FHPF0N8[0m

[34mVerifying rule: Customer_Balance_Constraint - 01JP732EZV7MB5EW8X45B6X8FE[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.120737)
Mapped Class[Customer] rules:
  Constraint Function: None 

The following attributes have been referenced

..Customer.balance: constraint
..Customer.credit_limit: constraint

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.120737)
Mapped Class[Customer] rules:
  Constraint Function: None 
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP732EZV7MB5EW8X45B6X8FE[0m

[34mVerifying rule: Order_Kafka_Integration - 01JP732F0AF6ECED61ENW0PT21[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.125438)
Mapped Class[Order] rules:
  RowEvent Order.send_row_to_kafka() 

The following attributes have been referenced


The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.125438)
Mapped Class[Order] rules:
  RowEvent Order.send_row_to_kafka() 
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP732F0AF6ECED61ENW0PT21[0m

[34mVerifying rule: Customer_Name_Constraint - 01JP732F0D701XE32B8SJNE0JR[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.130647)
Mapped Class[Customer] rules:
  Constraint Function: None 

The following attributes have been referenced

..Customer.name: constraint

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.130647)
Mapped Class[Customer] rules:
  Constraint Function: None 
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP732F0D701XE32B8SJNE0JR[0m

[34mVerifying rule: Customer_Name_Constraint - 01JP732F0GBQ2A9KWHVX5AGQNK[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.132701)
Mapped Class[Customer] rules:
  Constraint Function: None 

The following attributes have been referenced

..Customer.name: constraint

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.132701)
Mapped Class[Customer] rules:
  Constraint Function: None 
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP732F0GBQ2A9KWHVX5AGQNK[0m
01JP733V268CKQNJPD728B8Y5H rule file: logic/wg_rules/Customer_Balance_Rule.py
01JP733V29MY8WSZVNH7XA1MJT rule file: logic/wg_rules/Customer_Balance_Sum_Rule.py
01JP733V2AA51Q598FT9NNAMDN rule file: logic/wg_rules/Order_Amount_Total_Sum_Rule.py
01JP733V2BMD1W3QZX4RZ92QX1 rule file: logic/wg_rules/Item_Amount_Formula_Rule.py
01JP733V2CZX51BKNT6FHPF0N8 rule file: logic/wg_rules/Item_Unit_Price_Copy_Rule.py
01JP732EZV7MB5EW8X45B6X8FE rule file: logic/wg_rules/Customer_Balance_Constraint.py
01JP732F0AF6ECED61ENW0PT21 rule file: logic/wg_rules/Order_Kafka_Integration.py
01JP732F0D701XE32B8SJNE0JR rule file: logic/wg_rules/Customer_Name_Constraint.py
01JP732F0GBQ2A9KWHVX5AGQNK rule file: logic/wg_rules/Customer_Name_Constraint.py

[34mVerifying rule: Customer_Balance_Rule - 01JP733V268CKQNJPD728B8Y5H[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.144636)
Mapped Class[Customer] rules:
  Constraint Function: None 

The following attributes have been referenced

..Customer.balance: constraint
..Customer.credit_limit: constraint

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.144636)
Mapped Class[Customer] rules:
  Constraint Function: None 
Logic Bank 01.20.26 - 3 rules loaded

[32mActivated rule 01JP733V268CKQNJPD728B8Y5H[0m

The following rules have been loaded
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.144636)
Mapped Class[Customer] rules:
  Constraint Function: None 

The following attributes have been referenced

..Customer.balance: constraint
..Customer.credit_limit: constraint
..Customer.balance: constraint
..Customer.credit_limit: constraint

The following rules have been activated
Rule Bank[0xffff90298c80] (loaded 2025-03-13 06:29:52.144636)
Mapped Class[Customer] rules:
  Constraint Function: None 
Logic Bank 01.20.26 - 3 rules loaded
Exposing /Customer
Exposing /Item
Exposing /Order
Exposing /OrderDetail
Exposing /Product
Declare   API - api/expose_api_models, endpoint for each table on localhost:8282, customizing...
..discovered services: ['ontimize_api.py', 'system.py', 'new_service.py', 'newer_service.py']
Kafka Consumer not activated


sys_info here

Environment Variables...
.. APILOGICPROJECT_EXTERNAL_HOST = localhost
.. WG_SQLALCHEMY_DATABASE_URI = sqlite:////opt/projects/wgadmin/db.sqlite
.. VITE_PORT = 6005
.. ALL_DEFAULTS = True
.. APILOGICSERVER_CHATGPT_AZURE_ENDPOINT = 
.. APILOGICPROJECT_SWAGGER_PORT = 8282
.. GH_TOKEN = {personal access token from github}
.. APILOGICPROJECT_PORT = 4444
.. LOG_DIR = /opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/logs
.. GH_ORG = github.com/<gh-user-name>
.. APILOGICPROJECT_EXTERNAL_PORT = 8282
.. SECURITY_ENABLED = false
.. APILOGICPROJECT_IS_GENAI_DEMO = False
.. GENAI_LOGIC_PROD = None
.. PATH = /usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/home/api_logic_server/bin
.. APILOGICSERVER_CHATGPT_APIKEY = 
.. APILOGICSERVER_CHATGPT_AZURE_API_VERSION = 
.. PROJECT_ID = 01JP732DJNM0EKQXAF2KA7VKKB
.. APILOGICPROJECT_HTTP_SCHEME = http
.. PROJ_ROOT = /opt/projects/by-ulid
.. APILOGICPROJECT_API_PREFIX = /01JP732DJNM0EKQXAF2KA7VKKB
.. URL_ROOT = http://localhost:8282
.. PWD = /opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB
.. VERIFY_RULES = True
.. PYTHONPATH = /opt/webgenai:/opt/webgenai
.. WG_PROJECT = True
.. APILOGICPROJECT_SWAGGER_HOST = localhost
.. LOGICBANK_FAILSAFE = true
.. LC_CTYPE = C.UTF-8
.. SECRET_KEY = whatnothow
.. SQLALCHEMY_TRACK_MODIFICATIONS = False
.. SQLAlCHEMY_ECHO = False


flask_app.config: 
	
<Config {'DEBUG': None,
	'TESTING': False,
	'PROPAGATE_EXCEPTIONS': False,
	'SECRET_KEY': 'whatnothow',
	'PERMANENT_SESSION_LIFETIME': datetime.timedelta(days=31),
	'USE_X_SENDFILE': False,
	'SERVER_NAME': None,
	'APPLICATION_ROOT': '/',
	'SESSION_COOKIE_NAME': 'session',
	'SESSION_COOKIE_DOMAIN': None,
	'SESSION_COOKIE_PATH': None,
	'SESSION_COOKIE_HTTPONLY': True,
	'SESSION_COOKIE_SECURE': False,
	'SESSION_COOKIE_SAMESITE': None,
	'SESSION_REFRESH_EACH_REQUEST': True,
	'MAX_CONTENT_LENGTH': None,
	'SEND_FILE_MAX_AGE_DEFAULT': None,
	'TRAP_BAD_REQUEST_ERRORS': None,
	'TRAP_HTTP_EXCEPTIONS': False,
	'EXPLAIN_TEMPLATE_LOADING': False,
	'PREFERRED_URL_SCHEME': 'http',
	'TEMPLATES_AUTO_RELOAD': None,
	'MAX_COOKIE_SIZE': 4093,
	'API_PREFIX': '/01JP732DJNM0EKQXAF2KA7VKKB',
	'FLASK_HOST': '0.0.0.0',
	'SWAGGER_HOST': 'localhost',
	'PORT': 4444,
	'SWAGGER_PORT': '8282',
	'HTTP_SCHEME': 'http',
	'KAFKA_PRODUCER': None,
	'KAFKA_CONSUMER': None,
	'N8N_PRODUCER': None,
	'KEYCLOAK_BASE': 'http://localhost:8080/realms/kcals',
	'KEYCLOAK_REALM': 'kcals',
	'KEYCLOAK_BASE_URL': 'http://localhost:8080',
	'KEYCLOAK_CLIENT_ID': 'alsclient',
	'BACKTIC_AS_QUOTE': False,
	'ONTIMIZE_SERVICE_TYPE': 'OntimizeEE',
	'VERBOSE': False,
	'CREATE_AND_RUN': False,
	'CREATED_API_PREFIX': '/api',
	'CREATED_FLASK_HOST': '0.0.0.0',
	'CREATED_HTTP_SCHEME': 'http',
	'CREATED_PORT': '5656',
	'CREATED_SWAGGER_HOST': 'localhost',
	'CREATED_SWAGGER_PORT': '5656',
	'FLASK_APP': None,
	'FLASK_ENV': None,
	'OPT_LOCKING': 'optional',
	'SECURITY_ENABLED': False,
	'SECURITY_PROVIDER': None,
	'SQLALCHEMY_DATABASE_URI': 'sqlite:////opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/database/db.sqlite',
	'SQLALCHEMY_DATABASE_URI_AUTHENTICATION': 'sqlite:////opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/database/authentication_db.sqlite',
	'SQLALCHEMY_DATABASE_URI_LANDING': 'sqlite:////opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB/database/db_spa.sqlite',
	'SQLALCHEMY_TRACK_MODIFICATIONS': False,
	'EXTERNAL_HOST': 'localhost',
	'EXTERNAL_PORT': 8282,
	'IS_GENAI_DEMO': 'False'}>


PYTHONPATH..
../opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB
../opt/webgenai
../usr/local/lib/python312.zip
../usr/local/lib/python3.12
../usr/local/lib/python3.12/lib-dynload
../usr/local/lib/python3.12/site-packages
../home/api_logic_server
../opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB
../home/api_logic_server

sys.prefix (venv): /usr/local


hostname=37b02500f14d on local_ip=172.17.0.2, IPAddr=172.17.0.2


os.getcwd()=/opt/projects/by-ulid/01JP732DJNM0EKQXAF2KA7VKKB


